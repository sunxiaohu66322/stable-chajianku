import{d as Y,u as ie,g as U,_ as xe,c as a,a as re,P as X,D as Se,f as Pe,w as Xe,b as Ye,e as Ze,h as we,M as oe,i as et,j as tt,F as se,k as nt,l as at,o as d,m as F,n as i,p as u,q as c,r as e,s as T,t as rt,v as p,x as L,y as h,z as ne,A as ae,B as ot,C as V,E as st,G as lt,H as it,S as ut,I as dt,J as ct,K as pt,L as mt,N as he,O as vt,Q as ft,R as kt,T as gt,U as Ct,V as bt,W as yt,X as _t}from"./index-4399f518.js";import{S as W,s as wt,L as ht,R as It,f as xt}from"./fullScreenContextMenu-795d4b7d.js";import{F as N,N as St,_ as Pt}from"./numInput-f2527663.js";import"./functionalCallableComp-03af9871.js";import{D as Me,u as Mt,a as $t,b as At,c as Rt,d as Bt,e as Dt,f as Ft,s as Nt,g as Et,F as Tt}from"./FileItem-f4ef090a.js";/* empty css              *//* empty css              */import"./db-ccfd5d0c.js";var Vt=["class","style"],zt=function(){return{prefixCls:String,href:String,separator:X.any,overlay:X.any,onClick:Function}};const q=Y({compatConfig:{MODE:3},name:"ABreadcrumbItem",inheritAttrs:!1,__ANT_BREADCRUMB_ITEM:!0,props:zt(),slots:["separator","overlay"],setup:function(o,_){var f=_.slots,g=_.attrs,w=ie("breadcrumb",o),b=w.prefixCls,S=function(I,m){var s=U(f,o,"overlay");return s?a(Me,{overlay:s,placement:"bottom"},{default:function(){return[a("span",{class:"".concat(m,"-overlay-link")},[I,a(Se,null,null)])]}}):I};return function(){var P,I=(P=U(f,o,"separator"))!==null&&P!==void 0?P:"/",m=U(f,o),s=g.class,C=g.style,k=xe(g,Vt),v;return o.href!==void 0?v=a("a",re({class:"".concat(b.value,"-link"),onClick:o.onClick},k),[m]):v=a("span",re({class:"".concat(b.value,"-link"),onClick:o.onClick},k),[m]),v=S(v,b.value),m?a("span",{class:s,style:C},[v,I&&a("span",{class:"".concat(b.value,"-separator")},[I])]):null}}});var Ot=function(){return{prefixCls:String,routes:{type:Array},params:X.any,separator:X.any,itemRender:{type:Function}}};function jt(r,o){if(!r.breadcrumbName)return null;var _=Object.keys(o).join("|"),f=r.breadcrumbName.replace(new RegExp(":(".concat(_,")"),"g"),function(g,w){return o[w]||g});return f}function Ie(r){var o=r.route,_=r.params,f=r.routes,g=r.paths,w=f.indexOf(o)===f.length-1,b=jt(o,_);return w?a("span",null,[b]):a("a",{href:"#/".concat(g.join("/"))},[b])}const z=Y({compatConfig:{MODE:3},name:"ABreadcrumb",props:Ot(),slots:["separator","itemRender"],setup:function(o,_){var f=_.slots,g=ie("breadcrumb",o),w=g.prefixCls,b=g.direction,S=function(s,C){return s=(s||"").replace(/^\//,""),Object.keys(C).forEach(function(k){s=s.replace(":".concat(k),C[k])}),s},P=function(s,C,k){var v=et(s),x=S(C||"",k);return x&&v.push(x),v},I=function(s){var C=s.routes,k=C===void 0?[]:C,v=s.params,x=v===void 0?{}:v,M=s.separator,$=s.itemRender,A=$===void 0?Ie:$,R=[];return k.map(function(y){var B=S(y.path,x);B&&R.push(B);var O=[].concat(R),j=null;return y.children&&y.children.length&&(j=a(oe,null,{default:function(){return[y.children.map(function(E){return a(oe.Item,{key:E.path||E.breadcrumbName},{default:function(){return[A({route:E,params:x,routes:k,paths:P(O,E.path,x)})]}})})]}})),a(q,{overlay:j,separator:M,key:B||y.breadcrumbName},{default:function(){return[A({route:y,params:x,routes:k,paths:O})]}})})};return function(){var m,s,C,k=o.routes,v=o.params,x=v===void 0?{}:v,M=Pe(U(f,o)),$=(m=U(f,o,"separator"))!==null&&m!==void 0?m:"/",A=o.itemRender||f.itemRender||Ie;k&&k.length>0?C=I({routes:k,params:x,separator:$,itemRender:A}):M.length&&(C=M.map(function(y,B){return Xe(Ye(y.type)==="object"&&(y.type.__ANT_BREADCRUMB_ITEM||y.type.__ANT_BREADCRUMB_SEPARATOR),"Breadcrumb","Only accepts Breadcrumb.Item and Breadcrumb.Separator as it's children"),Ze(y,{separator:$,key:B})}));var R=(s={},we(s,w.value,!0),we(s,"".concat(w.value,"-rtl"),b.value==="rtl"),s);return a("div",{class:R},[C])}}});var Lt=["separator","class"],Ut=function(){return{prefixCls:String}};const le=Y({compatConfig:{MODE:3},name:"ABreadcrumbSeparator",__ANT_BREADCRUMB_SEPARATOR:!0,inheritAttrs:!1,props:Ut(),setup:function(o,_){var f=_.slots,g=_.attrs,w=ie("breadcrumb",o),b=w.prefixCls;return function(){var S;g.separator;var P=g.class,I=xe(g,Lt),m=Pe((S=f.default)===null||S===void 0?void 0:S.call(f));return a("span",re({class:["".concat(b.value,"-separator"),P]},I),[m.length>0?m:"/"])}}});z.Item=q;z.Separator=le;z.install=function(r){return r.component(z.name,z),r.component(q.name,q),r.component(le.name,le),r};N.useInjectFormItemContext=tt;N.ItemRest=se;N.install=function(r){return r.component(N.name,N),r.component(N.Item.name,N.Item),r.component(se.name,se),r};W.setDefaultIndicator=wt;W.install=function(r){return r.component(W.name,W),r};const Wt={class:"hint"},qt={class:"location-bar"},Kt={key:0},Gt=["onClick"],Qt={key:3,style:{"margin-left":"8px"}},Ht={class:"actions"},Jt=["onClick"],Xt={style:{width:"512px",background:"var(--zp-primary-background)",padding:"16px","border-radius":"4px","box-shadow":"0 0 4px var(--zp-secondary-background)",border:"1px solid var(--zp-secondary-background)"}},Yt={style:{padding:"4px"}},Zt={style:{padding:"4px"}},en={style:{padding:"4px"}},tn={key:0,class:"view"},nn={style:{padding:"16px 0 32px"}},an={key:0,class:"preview-switch"},rn=Y({__name:"stackView",props:{tabIdx:{},paneIdx:{},path:{},walkModePath:{},stackKey:{}},setup(r){const o=r,_=nt(),{scroller:f,stackViewEl:g,props:w,multiSelectedIdxs:b,spinning:S}=Mt().toRefs(),{currLocation:P,currPage:I,refresh:m,copyLocation:s,back:C,openNext:k,stack:v,quickMoveTo:x,addToSearchScanPathAndQuickMove:M,searchPathInfo:$,locInputValue:A,isLocationEditing:R,onLocEditEnter:y,onEditBtnClick:B,share:O,selectAll:j,onCreateFloderBtnClick:K,onWalkBtnClick:E,showWalkButton:ue}=$t(),{gridItems:$e,sortMethodConv:Ae,moreActionsDropdownShow:Z,sortedFiles:G,sortMethod:ee,itemSize:de,loadNextDir:Re,loadNextDirLoading:Be,canLoadNext:De,onScroll:Fe,cellWidth:Q}=At(),{onDrop:Ne,onFileDragStart:Ee,onFileDragEnd:Te}=Rt(),{onFileItemClick:Ve,onContextMenuClick:ce,showGenInfo:H,imageGenInfo:pe,q:ze}=Bt({openNext:k}),{previewIdx:J,onPreviewVisibleChange:Oe,previewing:me,previewImgMove:ve,canPreview:fe}=Dt(),{showMenuIdx:te}=Ft();return at(()=>o,()=>{w.value=o;const l=Nt.get(o.stackKey??"");l&&(v.value=l.slice())},{immediate:!0}),(l,t)=>{const je=vt,Le=ft,Ue=kt,ke=q,ge=z,We=gt,qe=Ct,Ce=bt,Ke=yt,Ge=oe,be=Me,Qe=St,ye=Pt,He=N,Je=W;return d(),F(Je,{spinning:e(S),size:"large"},{default:i(()=>[a(je,{style:{display:"none"}}),u("div",{ref_key:"stackViewEl",ref:g,onDragover:t[25]||(t[25]=c(()=>{},["prevent"])),onDrop:t[26]||(t[26]=c(n=>e(Ne)(n),["prevent"])),class:"container"},[a(Ue,{visible:e(H),"onUpdate:visible":t[1]||(t[1]=n=>T(H)?H.value=n:null),width:"70vw","mask-closable":"",onOk:t[2]||(t[2]=n=>H.value=!1)},{cancelText:i(()=>[]),default:i(()=>[a(Le,{active:"",loading:!e(ze).isIdle},{default:i(()=>[u("div",{style:{width:"100%","word-break":"break-all","white-space":"pre-line","max-height":"70vh",overflow:"auto","z-index":"9999"},onDblclick:t[0]||(t[0]=n=>e(rt)(e(pe)))},[u("div",Wt,p(l.$t("doubleClickToCopy")),1),L(" "+p(e(pe)),1)],32)]),_:1},8,["loading"])]),_:1},8,["visible"]),u("div",qt,[o.walkModePath?(d(),h("div",Kt,[a(We,null,{title:i(()=>[L(p(l.$t("walk-mode-move-message")),1)]),default:i(()=>[a(ge,{style:{flex:"1"}},{default:i(()=>[(d(!0),h(ne,null,ae(e(v),(n,D)=>(d(),F(ke,{key:D},{default:i(()=>[u("span",null,p(n.curr==="/"?l.$t("root"):n.curr.replace(/:\/$/,l.$t("drive"))),1)]),_:2},1024))),128))]),_:1})]),_:1})])):(d(),h("div",{key:1,class:"breadcrumb",style:ot({flex:e(R)?1:""})},[e(R)?(d(),F(qe,{key:0,style:{flex:"1"},value:e(A),"onUpdate:value":t[3]||(t[3]=n=>T(A)?A.value=n:null),onClick:t[4]||(t[4]=c(()=>{},["stop"])),onKeydown:t[5]||(t[5]=c(()=>{},["stop"])),onPressEnter:e(y),"allow-clear":""},null,8,["value","onPressEnter"])):(d(),F(ge,{key:1,style:{flex:"1"}},{default:i(()=>[(d(!0),h(ne,null,ae(e(v),(n,D)=>(d(),F(ke,{key:D},{default:i(()=>[u("a",{onClick:c(_e=>e(C)(D),["prevent"])},p(n.curr==="/"?l.$t("root"):n.curr.replace(/:\/$/,l.$t("drive"))),9,Gt)]),_:2},1024))),128))]),_:1})),e(R)?(d(),F(Ce,{key:2,size:"small",onClick:e(y),type:"primary"},{default:i(()=>[L(p(l.$t("go")),1)]),_:1},8,["onClick"])):(d(),h("div",Qt,[u("a",{onClick:t[6]||(t[6]=c((...n)=>e(s)&&e(s)(...n),["prevent"])),style:{"margin-right":"4px"}},p(l.$t("copy")),1),u("a",{onClick:t[7]||(t[7]=c((...n)=>e(B)&&e(B)(...n),["prevent","stop"]))},p(l.$t("edit")),1)]))],4)),u("div",Ht,[u("a",{class:"opt",onClick:t[8]||(t[8]=c((...n)=>e(m)&&e(m)(...n),["prevent"]))},p(l.$t("refresh")),1),e(ue)?(d(),h("a",{key:0,class:"opt",onClick:t[9]||(t[9]=c((...n)=>e(E)&&e(E)(...n),["prevent"]))}," Walk ")):V("",!0),u("a",{class:"opt",onClick:t[10]||(t[10]=c((...n)=>e(j)&&e(j)(...n),["prevent","stop"]))},p(l.$t("selectAll")),1),e(st)?V("",!0):(d(),h("a",{key:1,class:"opt",onClick:t[11]||(t[11]=c((...n)=>e(O)&&e(O)(...n),["prevent"]))},p(l.$t("share")),1)),a(be,null,{overlay:i(()=>[a(Ge,null,{default:i(()=>[(d(!0),h(ne,null,ae(e(_).quickMovePaths,n=>(d(),F(Ke,{key:n.dir},{default:i(()=>[u("a",{onClick:c(D=>e(x)(n.dir),["prevent"])},p(n.zh),9,Jt)]),_:2},1024))),128))]),_:1})]),default:i(()=>[u("a",{class:"opt",onClick:t[12]||(t[12]=c(()=>{},["prevent"]))},[L(p(l.$t("quickMove"))+" ",1),a(e(Se))])]),_:1}),a(be,{trigger:["click"],visible:e(Z),"onUpdate:visible":t[21]||(t[21]=n=>T(Z)?Z.value=n:null),placement:"bottomLeft",getPopupContainer:n=>n.parentNode},{overlay:i(()=>[u("div",Xt,[a(He,lt(it({labelCol:{span:6},wrapperCol:{span:18}})),{default:i(()=>[a(ye,{label:l.$t("gridCellWidth")},{default:i(()=>[a(Qe,{modelValue:e(Q),"onUpdate:modelValue":t[14]||(t[14]=n=>T(Q)?Q.value=n:null),max:1024,min:64,step:64},null,8,["modelValue"])]),_:1},8,["label"]),a(ye,{label:l.$t("sortingMethod")},{default:i(()=>[a(e(ut),{value:e(ee),"onUpdate:value":t[15]||(t[15]=n=>T(ee)?ee.value=n:null),onClick:t[16]||(t[16]=c(()=>{},["stop"])),conv:e(Ae),options:e(dt)},null,8,["value","conv","options"])]),_:1},8,["label"]),u("div",Yt,[e($)?e($).can_delete?(d(),h("a",{key:1,onClick:t[18]||(t[18]=c((...n)=>e(M)&&e(M)(...n),["prevent"]))},p(l.$t("removeFromSearchScanPathAndQuickMove")),1)):V("",!0):(d(),h("a",{key:0,onClick:t[17]||(t[17]=c((...n)=>e(M)&&e(M)(...n),["prevent"]))},p(l.$t("addToSearchScanPathAndQuickMove")),1))]),u("div",Zt,[u("a",{onClick:t[19]||(t[19]=c(n=>e(ct)(e(P)+"/"),["prevent"]))},p(l.$t("openWithLocalFileBrowser")),1)]),u("div",en,[u("a",{onClick:t[20]||(t[20]=c((...n)=>e(K)&&e(K)(...n),["prevent"]))},p(l.$t("createFolder")),1)])]),_:1},16)])]),default:i(()=>[u("a",{class:"opt",onClick:t[13]||(t[13]=c(()=>{},["prevent"]))},p(l.$t("more")),1)]),_:1},8,["visible","getPopupContainer"])])]),e(I)?(d(),h("div",tn,[a(e(Et),{class:"file-list",items:e(G),ref_key:"scroller",ref:f,onScroll:e(Fe),"item-size":e(de).first,"key-field":"fullpath","item-secondary-size":e(de).second,gridItems:e($e)},pt({default:i(({item:n,index:D})=>[a(Tt,{idx:parseInt(D),file:n,"full-screen-preview-image-url":e(G)[e(J)]?e(mt)(e(G)[e(J)]):"","show-menu-idx":e(te),"onUpdate:showMenuIdx":t[22]||(t[22]=_e=>T(te)?te.value=_e:null),selected:e(b).includes(D),"cell-width":e(Q),onFileItemClick:e(Ve),onDragstart:e(Ee),onDragend:e(Te),onPreviewVisibleChange:e(Oe),onContextMenuClick:e(ce),"is-selected-mutil-files":e(b).length>1},null,8,["idx","file","full-screen-preview-image-url","show-menu-idx","selected","cell-width","onFileItemClick","onDragstart","onDragend","onPreviewVisibleChange","onContextMenuClick","is-selected-mutil-files"])]),_:2},[o.walkModePath?{name:"after",fn:i(()=>[u("div",nn,[a(Ce,{onClick:e(Re),loading:e(Be),block:"",type:"primary",disabled:!e(De),ghost:""},{default:i(()=>[L(p(l.$t("loadNextPage")),1)]),_:1},8,["onClick","loading","disabled"])])]),key:"0"}:void 0]),1032,["items","onScroll","item-size","item-secondary-size","gridItems"]),e(me)?(d(),h("div",an,[a(e(ht),{onClick:t[23]||(t[23]=n=>e(ve)("prev")),class:he({disable:!e(fe)("prev")})},null,8,["class"]),a(e(It),{onClick:t[24]||(t[24]=n=>e(ve)("next")),class:he({disable:!e(fe)("next")})},null,8,["class"])])):V("",!0)])):V("",!0)],544),e(me)?(d(),F(xt,{key:0,file:e(G)[e(J)],idx:e(J),onContextMenuClick:e(ce)},null,8,["file","idx","onContextMenuClick"])):V("",!0)]),_:1},8,["spinning"])}}});const vn=_t(rn,[["__scopeId","data-v-a0015da1"]]);export{vn as default};
